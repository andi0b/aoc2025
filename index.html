<!DOCTYPE html>
<html>
  <head></head>
  <body>
    aoc2025 wasm
    <div id="c"></div>
  </body>

  <script>
    const funcs = [
      'day1_part1', 'day1_part2',
      'day2_part1', 'day2_part2'
    ]

    let wasm
    const loadWasm = async (file, imports) => WebAssembly.instantiateStreaming(fetch(file), { env: imports })
    loadWasm('wasm.wasm', {}).then(r => wasm = r)

    const run = (func) => wasm.instance.exports[func]()

    const c = document.getElementById('c')

    for (let f of funcs) {
      const d = document.createElement('div')
      c.appendChild(d)

      const l = document.createElement('label')
      l.innerText = 'run'
      d.appendChild(l)

      const b = document.createElement('button')
      b.innerText = f
      d.appendChild(b)

      const r = document.createElement('input')
      d.appendChild(r)

      b.onclick = async _ => r.value = await run(f)
    }
  </script>
</html>