<!DOCTYPE html>
<html>
  <head></head>
  <body>
    aoc2025 wasm
    <div id="c"></div>
  </body>

  <script>
    const c = document.getElementById('c')

    const createItem = (name, f) => {
      const d = document.createElement('div')
      c.appendChild(d)

      const l = document.createElement('label')
      l.innerText = 'run'
      d.appendChild(l)

      const b = document.createElement('button')
      b.innerText = name
      d.appendChild(b)

      const r = document.createElement('input')
      d.appendChild(r)

      b.onclick = async _ => r.value = await f()
    }

    const loadWasm = async (file, imports) => WebAssembly.instantiateStreaming(fetch(file), { env: imports })

    loadWasm('wasm.wasm', {}).then(wasm => {
      for (let prop in wasm.instance.exports) {
        const f = wasm.instance.exports[prop]
        if (typeof f === 'function') {
          createItem(prop, f)
        }
      }
    })
  </script>
</html>